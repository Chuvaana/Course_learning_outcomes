<div *ngIf="!tabsReady" class="loader-container">
  <p-progressSpinner styleClass="custom-spinner"></p-progressSpinner>
</div>

<h2 class="section-title">
  Нийт үнэлгээний аргуудад харгалзах оюутны гүйцэтгэлийн үнэлгээ
</h2>

<!-- Үнэлгээний хүснэгт -->
<p-table *ngIf="tabsReady" [value]="students" class="custom-table">
  <ng-template pTemplate="header">
    <tr>
      <th class="table-header">д/д</th>
      <th class="table-header">Оюутны нэрс / Үнэлгээний аргууд</th>
      <ng-container *ngFor="let tab of tabs">
        <th class="table-header">{{ tab.title }}</th>
      </ng-container>
      <th class="table-header">Нийт оноо</th>
    </tr>
    <tr>
      <th colspan="2">Авбал зохих нийт оноо</th>
      <ng-container *ngFor="let tab of tabs">
        <th>{{ tab.totalPoint }}</th>
      </ng-container>
      <th>100</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-student let-index="rowIndex">
    <tr>
      <td>{{ index + 1 }}</td>
      <td>{{ student.studentName }}</td>
      <ng-container *ngFor="let tab of tabs">
        <td>{{ getStudentGrade(student.id, tab.id) }}</td>
      </ng-container>
      <td>
        <b>{{ student.totalPoint }}</b>
      </td>
    </tr>
  </ng-template>
</p-table>
