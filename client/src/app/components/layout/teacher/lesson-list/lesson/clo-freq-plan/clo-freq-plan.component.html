<form [formGroup]="form">
  <p-table
    [value]="dataSource"
    rowGroupMode="rowspan"
    groupRowsBy="week"
    [tableStyle]="{ width: '100%' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Давтамж /7 хоног/</th>
        <th>CLO</th>
        <th>Дэд арга</th>
        <th>Оноо</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
      <tr [formGroup]="rowData.formGroup">
        <td
          *ngIf="isFirstOccurrence(rowData.week, rowIndex)"
          [attr.rowspan]="weekRowSpan[rowData.week]"
        >
          {{ rowData.week }}
        </td>
        <td>{{ rowData.formGroup.get("cloName")?.value }}</td>
        <td>{{ rowData.formGroup.get("methodName")?.value }}</td>
        <td>
          <input formControlName="score" pInputText />
        </td>
      </tr>
    </ng-template>
  </p-table>

  <button pButton label="Хадгалах" (click)="saveData()" class="mt-3"></button>
</form>
